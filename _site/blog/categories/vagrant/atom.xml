<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Category: vagrant &#8211; Just another tech blog</title>

<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Category: vagrant">

<meta name="twitter:site" content="@clburlison">
<meta name="twitter:creator" content="@clburlison">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://clburlison.com/images/">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Category: vagrant">

<meta property="og:url" content="https://clburlison.com/blog/categories/vagrant/atom.xml">
<meta property="og:site_name" content="Just another tech blog">





<link rel="canonical" href="https://clburlison.com/blog/categories/vagrant/atom.xml">
<link href="https://clburlison.com/feed.xml" type="application/atom+xml" rel="alternate" title="Just another tech blog Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://clburlison.com/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="https://clburlison.com/assets/js/vendor/html5shiv.min.js"></script>
	<script src="https://clburlison.com/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://clburlison.com/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://clburlison.com/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://clburlison.com/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://clburlison.com/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://clburlison.com/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://clburlison.com/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://clburlison.com/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="page">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="https://clburlison.com">Just another tech blog</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
					    
					        
					    
					    <li><a href="https://clburlison.com/about/" >About</a></li>
					  
					    
					        
					    
					    <li><a href="https://clburlison.com/resources/" >Resources</a></li>
					  
					    
					        
					    
					    <li><a href="https://clburlison.com/blog/archives/" >Archives</a></li>
					  
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    



	<img src="https://clburlison.com/images/me.jpg" class="bio-photo" alt="Clayton Burlison bio photo"></a>

<h3>Clayton Burlison</h3>
<p>A Mac sysadmin, documenting useful code, ideas, & guides.</p>
<a href="mailto:clburlison@gmail.com" class="author-social" target="_blank"><i class="fa fa-envelope-square"></i> Email</a>
<a href="http://twitter.com/clburlison" class="author-social" target="_blank"><i class="fa fa-twitter-square"></i> Twitter</a>
<a href="http://facebook.com/clburlison" class="author-social" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>

<a href="http://linkedin.com/in/clburlison" class="author-social" target="_blank"><i class="fa fa-linkedin-square"></i> LinkedIn</a>


<a href="http://github.com/clburlison" class="author-social" target="_blank"><i class="fa fa-github"></i> Github</a>






  </div>
  <article>
    <h1>Category: vagrant</h1>
    <div class="article-wrap">
      <?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: vagrant | Just another tech blog]]></title>
  <link href="https://clburlison.com/blog/categories/vagrant/atom.xml" rel="self"/>
  <link href="https://clburlison.com/"/>
  <updated>2014-10-19T11:20:51-05:00</updated>
  <id>https://clburlison.com/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="https://github.com/recurser/jekyll-plugins">Recurser</generator>

  
  <entry>
    <title type="html"><![CDATA[Creating a development munki_repo]]></title>
    <link href="https://clburlison.com/blog/2014/05/17/creating-a-development-munki-repo/"/>
    <updated>2014-05-17T07:51:22-05:00</updated>
    <id>https://clburlison.com/blog/2014/05/17/creating-a-development-munki-repo</id>
    <content type="html"><![CDATA[<p>I created a vagrant box that allows you create a completely self contained munki_repo for testing purposes. With the usage of <a href="https://puphpet.com">PuPHPet</a> the process was quite easy.</p>

<p>This article describes basic usage and setup for the project <strong>munki.dev</strong>.</p>

<section id="table-of-contents" class="toc">
  <header>
    <h3>Overview</h3>
  </header>
<div id="drawer">
<ul id="markdown-toc">
  <li><a href="#purpose">Purpose</a></li>
  <li><a href="#required-software">Required software</a>    <ul>
      <li><a href="#software-prerequisites-for-munkidev">Software prerequisites for munki.dev</a>        <ul>
          <li><a href="#vagrant">Vagrant</a></li>
          <li><a href="#virtualbox">Virtualbox</a></li>
          <li><a href="#git">Git</a></li>
          <li><a href="#munkitools">Munkitools</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#installation">Installation</a>    <ul>
      <li><a href="#adding-the-hostname">Adding the hostname</a></li>
      <li><a href="#munkirepo-modifications">munki_repo Modifications</a></li>
    </ul>
  </li>
  <li><a href="#client-settings">Client Settings</a></li>
  <li><a href="#ending-notes">Ending notes</a></li>
</ul>

  </div>
</section>
<!-- /#table-of-contents -->

<hr />

<h1 id="purpose">Purpose</h1>

<p>Setting up and maintaining a web server can be a pretty complex job. Apache is great at actually serving files but the initial setup can be tedious. Thanks to the many resources that are available on the internet this can become less tedious. Which brings me to the true purpose of the post…a way to setup a web server so I can test software patches using Munki.</p>

<p>In case you are unaware, Munki is a popular way to manage software installs on Mac OSX created by Greg Neagle. Learning Munki can be a time consuming process due to the many layers of the management system. One of the more important layers is the munki_repo, which is what this project is dedicated at helping with. This will allow you to setup a development environment which is self-contained on your administrative machine. Once the initial setup has been made you will be able to test changes locally without the need for a second machine.<br />
<em>Disclaimer</em>: this vagrant box is not designed for usage in production.</p>

<h1 id="required-software">Required software</h1>

<p>To use this project you will need to make sure you have the following software installed on your machine. All of these products can be obtained for free from the links provided. Below the prerequisites, each of the individual pieces of software have a short description explaining what they do. If you have some or any experience with the software needed for this you will likely want to skip past to the <a href="./#installation">Installation</a>.</p>

<h2 id="software-prerequisites-for-munkidev">Software prerequisites for munki.dev</h2>

<ul>
  <li>Vagrant  http://www.vagrantup.com</li>
  <li>VirtualBox  https://www.virtualbox.org</li>
  <li>Git  http://sourceforge.net/projects/git-osx-installer/</li>
  <li>Munkitools  <a href="https://munkibuilds.org/munkitools-latest.dmg">munkitools v.1- latest.dmg</a> or <a href="https://munkibuilds.org/munkitools2-latest.pkg">munkitools v.2 - latest.pkg</a>  </li>
</ul>

<h3 id="vagrant">Vagrant</h3>
<p>This is the backbone of this project. Vagrant’s job is to interface directly with Virtualbox to create the virtual machine, download a ubuntu box, configure the box with puppet (plus other magic), and finally make any final changes needed for the munki.dev environment to work as intended. If this is the first project that are using Vagrant let me go ahead and say do not freak out. You do not actually have to know how to use Vagrant to take advantage of this project.</p>

<h3 id="virtualbox">Virtualbox</h3>
<p>A virtualization product created by Oracle that is free to use. At the time of this writing, I am using version 4.3.8, though munki.dev and Vagrant should not have issues with other versions so long as no incompatibilities arise from future releases of the software. </p>

<h3 id="git">Git</h3>
<p>Git is a way to store files and the changes that go along with those files in a logical manner. For this project, Git is the tool that will be used to download munki.dev and potentially a test munki_repo from from GitHub.
If you would like to learn more, I recommend reading this <a href="http://git-scm.com/book/en/Getting-Started-Git-Basics">Git Basics</a> page.</p>

<h3 id="munkitools">Munkitools</h3>
<p>This is the client software needed for Munki to work on Macintosh Clients created by Greg Neagle. This technically is not a requirement for the administrative machine but will make your life easier when making changes to the munki_repo. For that reason alone it is strongly recommended. Any clients that you wish to connect to this local webshare will require munkitools to be installed.</p>

<h1 id="installation">Installation</h1>
<p>Installing is quite straight forward once you have the required software. Simply issue the following commands in Terminal. You will want to <code>cd</code> to a directory of your choosing. I will pick <code>~/src/mine</code>. This will download the project from github.</p>

<p><div class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir -p ~/src/mine/
<span class="nb">cd</span> ~/src/mine/
git clone https://github.com/clburlison/munki.dev.git munki.dev
<span class="nb">cd </span>munki.dev</code></pre></div></p>

<p>This will pull down all the necessary files from Github.</p>

<h2 id="adding-the-hostname">Adding the hostname</h2>
<p>One change you will want to make is adding munki.dev to your <code>/etc/hosts</code> file. This allows you to connect to the web share as munki.dev instead of the IP address (default 192.168.56.150). </p>

<p><div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo nano /etc/hosts</code></pre></div></p>

<p>Add the following line to the bottom of your file.</p>

<p><div class="highlight"><pre><code class="language-bash" data-lang="bash">192.168.56.150  munki.dev</code></pre></div></p>

<p>Save with Control + X.</p>

<p><strong>Note</strong>: at this current time there a known bug that prevents usage of the hostname from working when using an alias folder, aka Option 2 of the <code>bootstrap.sh</code>. Until this is fixed, please use the IP address for testing purposes instead of the hostname. Follow the issue <a href="https://github.com/clburlison/munki.dev/issues/1">here</a>.</p>

<h2 id="munkirepo-modifications">munki_repo Modifications</h2>
<p>Make these changes in the <code>bootstrap.sh</code> file. </p>

<p>Currently with Option 1, a developmental munki_repo will be pulled down via git from <a href="https://github.com/clburlison/munki_repo.dev">munki_repo.dev</a>. With Option 2, you can point this virtual machine to a munki_repo that exists on your local admin machine. This means theoretically you could have a complete copy of your production munki_repo on your localhost or an external hard drive. This would allow you to point to that folder and start testing/development immediately.</p>

<p>This will default to downloading a the testing munki_repo since this will allow new users to get started with the least amount of work. To get the virtual machine started run the following command.</p>

<p><div class="highlight"><pre><code class="language-bash" data-lang="bash">./bootstrap</code></pre></div></p>

<p><em>Note</em>: the default Option 1 will take some time to download. This is due to the software packages in the repo. It might even look like the command has become stalled. Go grab a coffee.</p>

<h1 id="client-settings">Client Settings</h1>
<p>At this point, the munki_repo should be up and running. You will want to setup a client computer to connect to the munki_repo. To do this you will need to run the following command on a client computer.</p>

<p><div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo defaults write /Library/Preferences/ManagedInstalls SoftwareRepoURL “http://192.168.56.150/munki_repo”
sudo defaults write /Library/Preferences/ManagedInstalls ClientIdentifier testing</code></pre></div></p>

<p>Now you should ready to test away. Open up <code>/Applications/Managed Software Center.app</code> if you are testing Munkitools v2 or <code>/Applications/Utilities/Managed Software Update.app</code> if you are testing Munkitools v1.</p>

<h1 id="ending-notes">Ending notes</h1>
<p>If you have any problems please create an <a href="https://github.com/clburlison/munki.dev/issues">Issue</a> on Github. Let me know what you think on Twitter, Email, etc.</p>

<p>Also, go check out <a href="https://github.com/hjuutilainen/munkiadmin">MunkiAdmin</a> for a GUI to modify your munki_repo. Another great resource is <a href="https://github.com/wollardj/Mandrill">Mandrill</a>, a web front end for managing you munki_repo. Lastly, check out the <a href="https://code.google.com/p/munki/wiki/GettingStartedWithMunki">Getting Started with Munki</a> guide if you have any questions about munki.  </p>
]]></content>
  </entry>
  
</feed>
    </div><!-- /.article-wrap -->
    
  </article>
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    <div class="google-ads">
  <!-- 320 x 50 ad -->
  <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
       style="display:inline-block;width:320px;height:50px"
       data-ad-client=""
       data-ad-slot=""></ins>
  <script>
  (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div><!-- /.google-ads -->

<span>&copy; 2014 Clayton Burlison. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/">Minimal Mistakes</a> theme.</span>
  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://clburlison.com/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://clburlison.com/assets/js/scripts.min.js"></script>

          

</body>
</html>